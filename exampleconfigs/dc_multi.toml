# Example staged-learning config using DeepChemDMPNN scoring

run_type = "staged_learning"
device = "cuda:0"
tb_logdir = "tb_logs"
json_out_config = "_dc_multi.json"

[parameters]
prior_file = "priors/reinvent.prior"
agent_file = "priors/reinvent.prior"
summary_csv_prefix = "dc_multi"
use_checkpoint = false
purge_memories = false
batch_size = 64
randomize_smiles = true
unique_sequences = false
tb_isim = false

[learning_strategy]
type = "dap"
sigma = 128
rate = 0.0001

[diversity_filter]
type = "IdenticalMurckoScaffold"
bucket_size = 25
minscore = 0.4

[[stage]]
max_steps = 200
min_steps = 50
max_score = 0.6
termination = "simple"
chkpt_file = "dc_multi_stage1.chkpt"

[stage.scoring]
type = "geometric_mean"
parallel = 1
filename = "dc_multi_stage1_scoring.toml"
filetype = "toml"

[[stage]]
max_steps = 200
min_steps = 50
max_score = 0.7
termination = "simple"
chkpt_file = "dc_multi_stage2.chkpt"

[stage.scoring]
type = "geometric_mean"
parallel = 1
filename = "dc_multi_stage2_scoring.toml"
filetype = "toml"
